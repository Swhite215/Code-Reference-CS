Microsoft Certified: Azure Developer Associate

Work with NoSQL Data in Azure Cosmos DB

    1. Module 1: Create an Azure Cosmos DB Database Built to Scale
        a. Exercise - Create an Azure Cosmos DB Account in the Azure Portal
            - Azure Cosmos DB - Azure resource that acts as an organizational entity for your databases
                - 1 Azure Cosmos DB - several supported data models
                - APIS - SQL (Document Database), Gremlin (Graph), MongoDB (Document), Azure Table, and Cassandra - each requires a separate account
                - Graph/Tables or Migration - create additional accounts with relevant data models
            - Create A Resource -> Databases -> Azure Cosmos DB -> Configure
        b. Request Unit
            - Request Unit - measurement of throughput, measured per second, request unit / second, must reserve the number of RU/S in advance to handle estimated load
                - Basics - 1 RU is equal to the approximate cost of performing a single GET requests on a 1KB document
                - # of RUs depends on document size, properties of document, operation being performed, and items such as consistency and indexing policy
                - Request Unit Charge - multiple amount of consumed RUs of each operation by the estimate number of times each operation will be executed per second
                - Provision in increments of 100 RUs per second
                - Important Factors - item size, item indexing, item property count, indexed properties, data consistency, query patterns, script usage
                - Exceeding Throughput Limit - requests become rate limited after hitting provisioned throughput
            - Provisioning Throughput - Provision throughput for your containers to perform writes, reads, updates, and deletes
            - Scale - estimate throughput needs by estimates number of operations youll have to support at different times
        c. Choose a Partition Key in Azure Cosmos DB
            - Partition Strategy - scale out, horizontal scaling, enables you to add more partitions to teh database as you neede them
            - Partition Key - value set when creating a container which organizes your data into logical divisions
                - Hot Partition - single partition that receives many more requests than others, which can create a throughput bottleneck
                - Storage space for the data associated with each partition key cannot exceed 10 GB
            - Best Practices
                - Dont be afraid of partition key that has a large number of values
                - Review top three to five queries you plan on using, value most frequently included in the WHERE clause is a good candidate for the partition key
                - For write-heavy workflows, youll need to understand the transaction needs of your workload, because partition key is the scope of multi-document transactions
        d. Exercise - Create a Database and Container in Azure Cosmos DB
            - Create Database and Container
                - Cosmos DB -> Data Explorer -> New Container -> Configure
    
    2. Module 2: Choose the Appropriate API for Azure Cosmos DB Storage
        a. Idenitfy the Technology Options
            - Consistency Levels - strong, bounded staleness, session, consistent prefix, and eventual
            - Core SQL API
                - default api, provides you with a view of your data that resembles a traditional NoSQL document store
                - Query JSON documents with a SQL-like language - SELECT, FROM, WHERE, BETWEEN, COUNT, SUM, MIN, MAX, ORDER BY
                - Uses JavaScript's type system, expression evaluation and function invocation
            - MongoDB API
                - MongoDB Wire Protocol using existing client SDKs, drivers, and tools as if you are running an actual MongoDB database
            - Cassanda API
                - Query data using the Cassandra Query Language - CREATE KEYSPACE, CREATE TABLE, ALTER TABLE, USE, INSERT, SELECT, UPDATE, BATCH, DELETE
                - Data will appear to be a partitioned row store
            - Azure Table API
                - Support for applications written for Azure Table Storage that need premium capabilities like global distribution, high availability, scalable throughput
                - Querying is accomplished using OData and LINQ queries, and original REST API for GET operations
            - Gremlin Graph API
                - Graph based view of data
                - Datat is either a vertex (which is an individua item in the database) or an edge (which is a relationship betwen items in the database)
        b. Analyze the Decision Criteria
            - New Project - Core SQL
            - Existing MongoDB, Cassandra, Azure Table or Gremlin Data - Corresponding API
            - Analysis of Relationships Between Data - Gremlin
            - Everything Else - Core SQL
        c. Use Core SQL to Store a Product Catalog
            - Reasons - Semi-structured data, needed filtering functionality, schema has to be flexible
        d. Use Gremlin Graph API as a Recommendation Engine
            - Reasons - Data store needs to be able to assign weight values to the relationships between products (e.g. number of time relationship occurs)
        e. Use MongoDB to Import Historical Order Data
            - Reasons - Semi-structured data that needs the flexibility to store many different data formats
        f. Use Cassandra for Web Analytics
            - Reasons - Previous experience working with Cassandra
        g. Use Azure Table to Store IoT Data
            - Reasons - Moving an existing huge database with low throughput to CosmosDB
    
    3. Module 3: Insert and Query Data in Your Azure Cosmos DB Database
        a. Exercise - Set Up Your Azure Cosmos DB and Container
            - Create Azure Cosmos DB Account and Database with the Azure CLI
                - export NAME=mysupersweetcosmosdb
                - az cosmosdb create --name $NAME --kind GlobalDocumentDB --resource-group learn-b01b7956-0fd1-403d-987a-5b037b930e29
                - az cosmosdb sql database create --account-name $NAME --name "Products" --resource-group learn-b01b7956-0fd1-403d-987a-5b037b930e29
                - az cosmosdb sql container create --account-name $NAME --database-name "Products" --name "Clothing" --partition-key-path "/productId" --throughput 1000 --resource-group learn-b01b7956-0fd1-403d-987a-5b037b930e29
        b. Exercise - Add Data Using Data Explorer
            - Data Explorer - A tool included in the Azure portal that is used to manage data stored in an Azure Cosmos DB
                - UI for navigating, viewing data, querying and modifying data, and creating and running stored procedures
            - Order
                - Azure Cosmos DB -> Data Explorer -> Open Full Screen -> Database -> Container -> Items -> New Item -> JSON
        c. Explore SQL Query Types
            - SELECT - SELECT * FROM Products p
            - FROM CLAUSE - SELECT p.id FROM Products AS p or SELECT p.id FROM Products p
            - Sub-Documents - SELECT * FROM Products.shipping
            - WHERE CLAUSE - SELECT * FROM Products p WHERE p.id ="1"
            - ORDER BY - SELECT p.price, p.description, p.productId FROM Products p ORDER BY p.price ASC
            - JOIN - SELECT p.productId FROM Products p JOIN p.shipping
        d. Exercise - Run Queries Using Data Explorer
            - Azure Cosmos DB -> Data Explorer -> Open Full Screen -> Database -> Container -> New SQL Query -> Execute Query
        e. Define Stored Procedures and User-Defined Functions
            - Ensure Atomicity, Consistency, Isolation, and Durability ACID
            - Stored Procedures Basics - stored procedures perform complex transactions on documents and properties, written in javascript and stored in a container on Azure Cosmos DB
            - User-Defined Function Basics - extends the Azure Cosmos DB SQL query language grammar and implement custom business logic
        f. Excercise - Run Complex Operations on Your Data
            - Stored Procedure Order
                - Azure Cosmos DB -> Data Explorer -> Open Full Screen -> Database -> Container -> New Stored Procedure -> Execute -> Input Parameters
            - User Defined Function Order
                - Azure Cosmos DB -> Data Explorer -> Open Full Screen -> Database -> Container -> New UDF -> Query (udf.function(arguments))
    
    4. Module 4: Store and Access Graph Data in Azure Cosmos DB with the Graph API
        a. Determing If a Graph Database Fits the Needs of Your Application
            - Graph Database
                - Graph - structure that is composed of vertices (objects) and edges (relationships)
                - Properties - express information about the vertices and edges
                - Nodes or Vertices e.g. Customer, Employee, Product, Order, Category, Invoice
                - Relationships or Edges e.g. Likes, Places, Belongs to, Submits
            - Strengths and Weaknesses
                - Performance - performance is constant
                - Flexibility - easy to add an existing structure with affecting functionality
                - Weaknesses - not as efficient at processing high volumes of transactions nor handling queries that traverse an entire database
        b. Build an Application that Stores Graph Data using the Gremlin API
            - Order - Create Datrabase, Run Queries
            - Gremlin API supporst modeling graph data and provides APIs to traverse the graph data
            - Gremlin Graph Traversal Language - high-performance language used to traverse and query data from graph databases
        c. Exercise - Build an Application that Stores Graph Data using the Gremlin API
            - Create an Azure Cosmos DB Account
            - Add a Graph
                - Cosmos DB -> Copy Gremline Endpoint -> Data Explorer -> New Graph -> Add Graph -> Configure -> Keys -> Copy Primary Key
            - Create a Node.js App
                - mkdir gremlin app && cd gremlinapp && npm i gremlin
                - touch config.js && touch app.js
        d. Query Graph Data from an Application Using Gremlin API
        e. Exercise - Query Graph Data from an Application Using Gremlin API
            - 